---
title: Linux运维
date: 2020-04-10 10:24:39
categories: Linux
tags:
- 运维
copyright: true
---

# Linux运维

记录在使用Linux过程中遇到的一些问题的解决方式

**jupyter lab无权限创建文件**

`chmod 777 file_path` 解决

**jupyter lab 服务器地址访问被拒绝**

启动时加上 --ip=0.0.0.0

`jupyter lab --port=8889 --ip=0.0.0.0`

**jupyter lab tqdm 进度条不显示**

出现

`HBox(children=(FloatProgress…… `

解决：

```shell
# 首先需要打开ipywidgets的插件
jupyter nbextension enable --py widgetsnbextension
 
# 然后还需要安装 Jupyter Lab的相关插件
jupyter labextension install @jupyter-widgets/jupyterlab-manager
```

**zip文件解压**

`unzip file -d outputdir`

**数据文件软链接**

`ln -s real_path ./data` 从real_path 映射到data目录。

**Python本地导入模块**

注意导入的是模块的所在目录，对于包来说就是包这个文件夹所在的目录，而不是包中文件所在目录。

`export PYTHONPATH=$PYTHONPATH:/model/path`

**查看cuda版本**

`cat /usr/local/cuda/version.txt`

**tensorflow查看GPU是否可用**

`print('GPU',tf.test.is_gpu_available())`

**文件排序查看**

按大小查看

-s表示按文件大小排序，-l表示以长格式显示，即列出文件详细信息如上面的格式。 S是大写

`ls -lSh`  降序查看

`ls -lrSh` 升序查看

按时间查看， -t表示按时间排序，-r表示逆序

`ls -lt` 降序查看

`ls -lrt`升序查看

## vim

**vim批量注释**

`Ctrl + v` 列编辑，然后`Shift + i` 插入`#`之后连续两下Esc

**vim批量删除**

`Ctrl + v` 列编辑，然后`d` 删除之后连续两下Esc

**vim批量粘贴**

`v` 行视图，然后选中对应的行,`y` 复制，之后到需要粘贴的地方`p` 进行粘贴

**vim粘贴格式混乱**

`:set paste`后`i`在粘贴

## ssh

### 免密登录

#### 流程

1. 本机创建公钥和私钥文件 已有的话不用创建`ssh-keygen -t rsa -P '' -f ~/.ssh/id_rsa -C "xx-email"`
2. 将本机的公钥拷贝到服务器上
   1. `cat ~/.ssh/id_rsa.pub | ssh user@serverip "cat - >> ~/.ssh/authorized_keys"`
3. 权限相关（chmod）
   1.  .ssh目录的权限必须是700
   2. .ssh/authorized_keys文件权限必须是600

[参考](https://juejin.im/post/6844903734233792519)

## 进程相关

查看进程是否有子进程，或者是否开启了多个线程。ps 只能显示进程的pid，线程的pid无法获取，但是htop可以显示线程的pid。

`cd /proc/pid/task`里面的目录数便是这个pid管理的子进程，子线程。

**查看进程之间的关系**

`pstree -Aup` 显示所有进程之间的关系，也会显示生成的子线程。

